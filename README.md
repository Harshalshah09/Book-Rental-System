# Book Rental System

A book rental system backend developed using Node.js, TypeScript, and MongoDB. This project provides APIs to manage books, users, and transactions for a book rental service.

## Technologies Used

- **Node.js**: JavaScript runtime for building scalable network applications.
- **TypeScript**: Superset of JavaScript that compiles to plain JavaScript, providing type safety and modern features.
- **MongoDB**: NoSQL database for storing application data.
- **Joi**: Validation library for ensuring data integrity.
- **Express**: Web framework for building RESTful APIs.
- **Mongoose**: ODM (Object Data Modeling) library for MongoDB and Node.js.

## File Structure

- `src/`
  - `index.ts`: Entry point of the application.
  - `server.ts`: Configures and starts the Express server.
  - `config/`
    - `mongodb.config.ts`: Configuration for connecting to MongoDB.
  - `routes/`
    - `book.routes.ts`: Routes for book-related operations.
    - `transaction.routes.ts`: Routes for transaction-related operations.
    - `user.routes.ts`: Routes for user-related operations.
  - `controllers/`
    - `book.controller.ts`: Controllers for handling book operations.
    - `transaction.controller.ts`: Controllers for handling transactions.
    - `user.controller.ts`: Controllers for handling user operations.
  - `validations/`
    - `book.validation.ts`: Joi schemas for validating book data.
    - `transaction.validation.ts`: Joi schemas for validating transaction data.
    - `user.validation.ts`: Joi schemas for validating user data.
  - `middlewares/`
    - `errorHandler.middleware.ts`: Middleware for handling errors.
    - `validateRequest.middleware.ts`: Middleware for validating request data.

## API Endpoints

### Users

- **Create a User**
  - `POST /api/users`
  - Request Body: `{ name: string, email: string, age: number, address: string }`

- **Update a User**
  - `PUT /api/users/:id`
  - Request Body: `{ name: string, email: string, age: number, address: string }`

- **Get All Users**
  - `GET /api/users`

### Books

- **Create a Book**
  - `POST /api/books`
  - Request Body: `{ name: string, category: string, rentPerDay: number }`

- **Update a Book**
  - `PUT /api/books/:id`
  - Request Body: `{ name: string, category: string, rentPerDay: number }`

- **Delete a Book**
  - `DELETE /api/books/:id`

- **Get Books by Name or Term**
  - `GET /api/books/search`
  - Query Parameters: `name=book_name_or_term`

- **Get Books by Rent Range**
  - `GET /api/books/rent`
  - Query Parameters: `minRent=number&maxRent=number`

- **Get Books by Category, Name/Term, and Rent Range**
  - `GET /api/books/filter`
  - Query Parameters: `category=category_name&name=book_name_or_term&minRent=number&maxRent=number`

### Transactions

- **Issue a Book**
  - `POST /api/transactions/issue`
  - Request Body: `{ bookId: string, userId: string, issueDate: string }`

- **Return a Book**
  - `POST /api/transactions/return`
  - Request Body: `{ transactionId: string, returnDate: string }`

- **Get Issued Books by User**
  - `GET /api/transactions/user/:userId`

- **Get Total Rent Generated by a Book**
  - `GET /api/transactions/book/:bookId/rent`

- **Get List of Books Issued to a Person**
  - `GET /api/transactions/person/:userId`

- **Get Books Issued in a Date Range**
  - `GET /api/transactions/date-range`
  - Query Parameters: `startDate=YYYY-MM-DD&endDate=YYYY-MM-DD`

## Getting Started

1. **Clone the Repository:**

   ```bash
   git clone https://github.com/yourusername/book-rental-system.git
   cd book-rental-system
   ```

2. **Install Dependencies:**

   ```bash
   npm install
   ```

3. **Build the Project:**

   ```bash
   npm run build
   ```

4. **Start the Server:**

   ```bash
   npm start
   ```

5. **Open Postman and Test the APIs**

   Use Postman to test the available endpoints listed above.

## Environment Variables

Make sure to create a `.env` file in the root directory with the following variables:

```
MONGO_URI=your_mongodb_connection_string
PORT=5001
```
